{"ast":null,"code":"var _jsxFileName = \"/Users/steutama/Documents/Documents/team19/react_app/src/components/AdminPage/UserTable.js\";\nimport React from \"react\";\nimport MaterialTable from \"material-table\";\nimport OrderTable from \"./OrderTable\";\n\nclass UserTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      isAdmin: false\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:3001/api/profile\", {\n      method: \"GET\",\n      credentials: \"include\"\n    }).then(response => response.json()).then(json => {\n      console.log(json);\n\n      if (json === null) {\n        this.props.history.push(\"/login\");\n      } else {\n        this.setState({\n          isAdmin: json.isAdmin\n        });\n      }\n    });\n  }\n\n  componentWillMount() {\n    fetch(\"http://localhost:3001/api/admin/users\", {\n      method: \"GET\",\n      credentials: \"include\"\n    }).then(response => response.json()).then(json => {\n      if (json !== null) {\n        this.setState({\n          data: json\n        });\n      }\n    });\n  }\n\n  render() {\n    function parseUserData(data) {\n      const ret = [];\n\n      for (let i = 0; i < data.length; i++) {\n        const userData = {\n          id: data[i]._id,\n          name: data[i].firstName,\n          surname: data[i].lastName,\n          email: data[i].email,\n          isPremium: data[i].isPremium.toString() === \"true\" ? React.createElement(\"font\", {\n            color: \"blue\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 54\n            },\n            __self: this\n          }, \"Yes\") : React.createElement(\"font\", {\n            color: \"red\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }, \"No\")\n        };\n        ret.push(userData);\n      }\n\n      return ret;\n    }\n\n    return React.createElement(MaterialTable, {\n      title: \"All Users\",\n      columns: [{\n        title: \"User ID\",\n        field: \"id\"\n      }, {\n        title: \"Name\",\n        field: \"name\"\n      }, {\n        title: \"Surname\",\n        field: \"surname\"\n      }, {\n        title: \"Email\",\n        field: \"email\"\n      }, {\n        title: \"Premium\",\n        field: \"isPremium\"\n      }],\n      data: parseUserData(this.state.data),\n      detailPanel: rowData => {\n        return React.createElement(OrderTable, {\n          userId: rowData.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        });\n      },\n      editable: {\n        onRowDelete: oldData => fetch(\"http://localhost:3001/api/admin/\".concat(oldData.id), {\n          method: \"DELETE\",\n          credentials: \"include\"\n        }).then(response => response.json()).then(json => {\n          if (json !== null) {\n            window.location.reload();\n          } else {\n            console.log(\"Deletion Failed\");\n          }\n        })\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default UserTable;","map":{"version":3,"sources":["/Users/steutama/Documents/Documents/team19/react_app/src/components/AdminPage/UserTable.js"],"names":["React","MaterialTable","OrderTable","UserTable","Component","constructor","props","state","data","isAdmin","componentDidMount","fetch","method","credentials","then","response","json","console","log","history","push","setState","componentWillMount","render","parseUserData","ret","i","length","userData","id","_id","name","firstName","surname","lastName","email","isPremium","toString","title","field","rowData","onRowDelete","oldData","window","location","reload"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport MaterialTable from \"material-table\";\nimport OrderTable from \"./OrderTable\";\n\nclass UserTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      isAdmin: false\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:3001/api/profile\", {\n      method: \"GET\",\n      credentials: \"include\"\n    })\n      .then(response => response.json())\n      .then(json => {\n        console.log(json);\n        if (json === null) {\n          this.props.history.push(\"/login\");\n        } else {\n          this.setState({\n            isAdmin: json.isAdmin\n          });\n        }\n      });\n  }\n  componentWillMount() {\n    fetch(\"http://localhost:3001/api/admin/users\", {\n      method: \"GET\",\n      credentials: \"include\"\n    })\n      .then(response => response.json())\n      .then(json => {\n        if (json !== null) {\n          this.setState({ data: json });\n        }\n      });\n  }\n  render() {\n    function parseUserData(data) {\n      const ret = [];\n      for (let i = 0; i < data.length; i++) {\n        const userData = {\n          id: data[i]._id,\n          name: data[i].firstName,\n          surname: data[i].lastName,\n          email: data[i].email,\n          isPremium:\n            data[i].isPremium.toString() === \"true\" ? (\n              <font color=\"blue\">Yes</font>\n            ) : (\n              <font color=\"red\">No</font>\n            )\n        };\n        ret.push(userData);\n      }\n      return ret;\n    }\n    return (\n      <MaterialTable\n        title=\"All Users\"\n        columns={[\n          { title: \"User ID\", field: \"id\" },\n          { title: \"Name\", field: \"name\" },\n          { title: \"Surname\", field: \"surname\" },\n          { title: \"Email\", field: \"email\" },\n          { title: \"Premium\", field: \"isPremium\" }\n        ]}\n        data={parseUserData(this.state.data)}\n        detailPanel={rowData => {\n          return <OrderTable userId={rowData.id} />;\n        }}\n        editable={{\n          onRowDelete: oldData =>\n            fetch(`http://localhost:3001/api/admin/${oldData.id}`, {\n              method: \"DELETE\",\n              credentials: \"include\"\n            })\n              .then(response => response.json())\n              .then(json => {\n                if (json !== null) {\n                  window.location.reload();\n                } else {\n                  console.log(\"Deletion Failed\");\n                }\n              })\n        }}\n      />\n    );\n  }\n}\n\nexport default UserTable;\n"]},"metadata":{},"sourceType":"module"}